<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" xml:lang="en-GB" ng-app="myApp">

<head>
    <meta charset="UTF-8" />
    <link href="images/favicon.png" rel="icon" type="image/png" />
    <link href="stylesheets/compleat.css" rel="stylesheet" />
    <link href="stylesheets/nav_bar.css" rel="stylesheet" />
    <link href="stylesheets/form.css" rel="stylesheet" />
    <link href="stylesheets/gallery.css" rel="stylesheet" />
    <link href='https://fonts.googleapis.com/css?family=Quicksand' rel='stylesheet' type='text/css' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.12/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-filter/0.5.8/angular-filter.min.js"></script>
    <script src="javascripts/gallery.js" type="text/javascript"></script>
    <script src="javascripts/instafeed.min.js" type="text/javascript"></script>
    <script src="javascripts/slick.min.js" type="text/javascript"></script>
    <title>Compleat Fitness</title>
</head>

<body>
    <div class="wrapper">

        <!-- Interactive Menu -->
        <nav class="menu">
            <input type="checkbox" class="menu-open" name="menu-open" id="menu-open" />
            <label class="menu-open-button" for="menu-open">.
                <span class="hamburger hamburger-1"></span>
                <span class="hamburger hamburger-2"></span>
                <span class="hamburger hamburger-3"></span>
            </label>
            <a href="/" class="menu-item">
                <object data="images/home.svg" type="image/svg+xml" class="menu_icon">
                    Home</object>
            </a>
            <a href="packages" class="menu-item">
                <object data="images/barbell.svg" type="image/svg+xml" class="menu_icon">
                    Fitness Plans</object>
            </a>
            <a href="nutrition" class="menu-item">
                <object data="images/cutlery.svg" type="image/svg+xml" class="menu_icon">
                    Healthy Recipes</object>
            </a>
            <a href="gallery" class="menu-item">
                <object data="images/picture.svg" type="image/svg+xml" class="menu_icon">
                    Healthy Food Pix</object>
            </a>
            <a href="contact" class="menu-item">
                <object data="images/forums.svg" type="image/svg+xml" class="menu_icon">
                    Contact</object>
            </a>

            <!-- Filters -->
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
                <defs>
                    <filter id="shadowed-goo">
                        <feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="10" />
                        <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />
                        <feGaussianBlur in="goo" stdDeviation="3" result="shadow" />
                        <feColorMatrix in="shadow" mode="matrix" values="0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 -0.2" result="shadow" />
                        <feOffset in="shadow" dx="1" dy="1" result="shadow" />
                        <feComposite in2="shadow" in="goo" result="goo" />
                        <feComposite in2="goo" in="SourceGraphic" result="mix" />
                    </filter>
                    <filter id="goo">
                        <feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="10" />
                        <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />
                        <feComposite in2="goo" in="SourceGraphic" result="mix" />
                    </filter>
                </defs>
            </svg>
        </nav>

        <!-- Header Content -->
        <header>
            <a href="index.html#"><img src="images/title.png" alt="compleat fitness" /></a>
        </header>

        <!-- Main Content -->
        <main>

            <!-- File Upload -->
            <h1>Share photos of your meals and progress!</h1>
            <br/>
            <form id="uploadForm" action="/gallery" method="post" enctype="multipart/form-data">
                Select an image to upload:
                <br/>
                <input type="file" name="userPhoto" id="fileToUpload">
                <br/>
                <input type="submit" value="Upload Image" name="submit" ng-click="uploadImg()">
                <p id="upload_resp"></p>
            </form>

            <!-- Display Photos -->
            <div class="container" ng-controller="AppCtrl">
                <div ng-repeat="x in imgrefs | reverse">
                    <img ng-src="{{x.imgref}}" class="uploads" />
                </div>
            </div>

            <!--             <div class="container" ng-controller="AppCtrl">
                <div class="row" ng-repeat="rows in imgrefs | reverse | groupBy:4">
                    <div class="col" ng-repeat="ref in rows">
                        <img ng-src="{{ref.imgref}}" class="uploads" />
                    </div>
                </div>
            </div> -->

<!--             <div class="container" ng-controller="AppCtrl">
                <div ng-repeat="ref in imgrefs track by $index" ng-if="$index%3==0">
                    <img src="{{imgrefs[$index].imgref}}" class="leftimg"/>
                    <img src="{{imgrefs[$index+1].imgref}}" class="centreimg"/>
                    <img src="{{imgrefs[$index+2].imgref}}" class="rightimg"/>
                </div>
            </div> -->

            <hr>

            <!-- Instafeed -->
            <h1>My Instagram</h1>
            <div class="insta_wrapper">
                <div id="instafeed" class="instafeed"></div>
            </div>

        </main>
    </div>

    <!-- Social Media Icons -->
    <div class="social_media_icons">
        <a href="http://www.facebook.com/compleatfitness.jen" target="_blank">
            <img title="Facebook" src="images/facebook.svg" alt="Facebook" class="social_media" /></a>
        <a href="http://www.instagram.com/compleatfitness" target="_blank">
            <img title="Instagram" src="images/instagram.svg" alt="Instagram" class="social_media" /></a>
    </div>

    <!-- Footer -->
    <footer>
        <a href="mailto:fc13269@bristol.ac.uk">Freddie Caira</a> and <a href="mailto:cw13121@bristol.ac.uk">Connor Williams</a>
    </footer>

    <script>
    var feed = new Instafeed({
        clientId: 'e0347429fc5548d48ddb0b92cbfbfcbb',
        accessToken: '233584328.e034742.88db8c1704d14b11856e3382dba76ad9',
        get: 'user',
        userId: '233584328',
        template: '<img src="{{model.images.standard_resolution.url}}"/>',
        after: function() {
            runSlick();
        },
    });
    feed.run();
    </script>

    <script type="text/javascript">
    function runSlick() {
        $('.instafeed').slick({
            slidesToShow: 1,
            slidesToScroll: 1,
            autoplay: true,
            autoplaySpeed: 2000,
            fade: true,
            arrows: false,
        });
    }
    </script>

</body>

</html>